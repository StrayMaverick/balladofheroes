<div class="bestiaryView">
    <!--<table>
      <tr>
        <td class="clickableText tabItem" [ngClass]="{'active': resourceTabActive === resourceViewEnum.Equipment }"
          (click)="toggleDisplayView(resourceViewEnum.Equipment)">
          <button class="buttonAsText clickableText m1Heading"
            [ngClass]="{'active': resourceTabActive === resourceViewEnum.Equipment }">Equipment</button>
        </td>
        <td class="clickableText tabItem" [ngClass]="{'active': resourceTabActive === resourceViewEnum.Resources }"
          (click)="toggleDisplayView(resourceViewEnum.Resources)">
          <button class="buttonAsText clickableText m1Heading"
            [ngClass]="{'active': resourceTabActive === resourceViewEnum.Resources }">Resources & Crafting
            Materials</button>
        </td>
        <td class="clickableText tabItem" [ngClass]="{'active': resourceTabActive === resourceViewEnum.Progression }"
          (click)="toggleDisplayView(resourceViewEnum.Progression)">
          <button class="buttonAsText clickableText m1Heading"
            [ngClass]="{'active': resourceTabActive === resourceViewEnum.Progression }">Progression</button>
        </td>
      </tr>
    </table>
    <hr class="noMargin" /> -->
    
    <div class="balladView">
        <div class="options">
            <span>Select a location from the list below.</span>
            <br/>
            <br/>
            <div class="balladList">
                <div class="eachBallad" *ngFor="let ballad of availableBallads">
                    <div *ngIf="!isBalladSelected(ballad)">
                        <button class="textLeftAligned buttonAsTextKeepColor clickableText z1Heading defaultBallad"
                            [ngClass]="getBalladClass(ballad)"
                            (click)="selectBallad(ballad)">{{balladService.getBalladName(ballad)}}                            
                        </button>
                    </div>
                    <div *ngIf="isBalladSelected(ballad)" [ngClass]="{'flexBetween': !isMobile}">
                        <button class="textLeftAligned buttonAsTextKeepColor clickableText z1Heading selected defaultBallad"><strong
                                [ngClass]="getBalladClass(ballad)">{{balladService.getBalladName(ballad)}}</strong></button>
                        <div class="zoneList">
                            <div *ngFor="let zone of availableZones">
                                <div *ngIf="!isZoneSelected(zone)">
                                    <span class="zoneSpacer">&#8618;</span><button class="buttonAsTextKeepColor z2Heading clickableText defaultZone"
                                        [ngClass]="getZoneClass(zone)" (click)="selectZone(zone)">{{getZoneName(zone)}}                                        
                                    </button>
                                </div>
                                <div *ngIf="isZoneSelected(zone)">
                                    <span class="zoneSpacer">&#8618;</span><button class="buttonAsTextKeepColor z2Heading clickableText selected defaultZone"><strong
                                            [ngClass]="getZoneClass(zone)">{{getZoneName(zone)}}</strong></button>
                                    <div *ngFor="let subzone of availableSubzones">
                                        <div *ngIf="!isSubzoneSelected(subzone)">
                                            <span class="subzoneSpacer">&#8618;</span><span><button
                                                    class="buttonAsTextKeepColor z3Heading clickableText defaultSubzone"
                                                    [ngClass]="getSubzoneClass(subzone)"
                                                    (click)="selectSubzone(subzone)">{{getSubzoneName(subzone)}}                                                                                                        
                                                </button>
                                            </span>
                                        </div>
                                        <div *ngIf="isSubzoneSelected(subzone)">
                                            <strong><button
                                                    class="buttonAsTextKeepColor z3Heading clickableText selected defaultSubzone"><span
                                                        class="subzoneSpacer">&#8618;</span><strong><span
                                                            [ngClass]="getSubzoneClass(subzone)">{{getSubzoneName(subzone)}}
                                                            </span></strong></button></strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                    
                </div>
            </div>
        </div>
        <div *ngIf="selectedBallad !== undefined && selectedZone === undefined && selectedSubzone === undefined" class="info textCentered">
            <span class="s2Heading pageHeader">{{balladService.getBalladName(selectedBallad.type)}}</span>
            <br/>
            <span class="smallCaps bold">ballad</span>
            <br/>
            <br/>
            <span>Description?</span>
            <hr/>
            <span>Total Enemies Defeated: {{balladEnemyCount()}} </span> <!--Can show how many defeated as well-->            
            <span></span>
            <hr/>
            <span>Items</span>
        </div>
        <div *ngIf="selectedZone !== undefined && selectedSubzone === undefined" class="info textCentered">
            <span class="s2Heading pageHeader">{{getZoneName(selectedZone.type)}}</span>
            <br/>
            <span class="smallCaps bold">zone</span>
            <hr/>
            <span>Total Enemies: </span> <!--Can show how many defeated as well-->            
            <span></span>
            <hr/>
            <span>Items</span>
        </div>
        <div *ngIf="selectedSubzone !== undefined" class="info textCentered">
            <span class="s2Heading pageHeader">{{balladService.getSubZoneName(selectedSubzone.type)}}</span>
            <br/>
            <span class="smallCaps bold">subzone</span>            
            <br/>
            <br/>
            <span class="sectionHeaderText sectionHeading">enemies</span>            
            <br/>
            <span>{{getEnemiesDefeated()}} / {{enemyList.length}} enemies defeated</span>
            <br/>
            <br/>
            <div class="enemyList">
                <div class="enemy" *ngFor="let enemy of enemyList; let i = index">
                    <span [innerHtml]="getEnemyName(enemy)" customToolTip [tooltipDirection]="tooltipDirection"
                    [contentTemplate]="enemyPopover"></span>
                    <ng-template #enemyPopover>
                        <app-enemy-description-view  *ngIf="getEnemyName(enemy) !== nameHiddenText" [character]="enemy"></app-enemy-description-view>
                        <span *ngIf="getEnemyName(enemy) === nameHiddenText">{{nameHiddenText}}</span>
                      </ng-template>
                </div>
            </div>
            <hr/>
            <span class="sectionHeaderText sectionHeading">encounters</span>
            <br/>
            <span>Each encounter has a {{getSubzoneEncounterChance()}}% chance to occur.</span>
            <br/>
            <br/>
            <div class="enemyEncounterList">
                <div class="encounter" *ngFor="let encounter of enemyEncounters; let i = index">
                    <strong>Encounter {{i + 1}}</strong>
                    <br/>
                    <span [innerHtml]="getEnemyEncounter(encounter)"></span>                    
                </div>
            </div>
            <hr/>
            <span class="sectionHeaderText sectionHeading">items</span>   
            <br/>
            <span>Total Items Available: {{totalItemsAvailable()}}</span>
            <br/>
            <br/>         
            <div class="itemList">
                <div *ngIf="availableItems.length > 0" class="smallCaps bold subheader">loot</div>
                <div class="item" *ngFor="let item of availableItems; let i = index">
                    <span *ngIf="!itemIsResource(item.item)" [ngClass]="getItemClass(item.item)" customToolTip [tooltipDirection]="tooltipDirection"
                    [contentTemplate]="itemDescriptionContent" [innerHtml]="getItemName(item.item)"></span>  
                    <app-resource-item-view *ngIf="itemIsResource(item.item)" [resource]="item.item" [canSetTrackingResource]="false"></app-resource-item-view>                  
                    <ng-template #itemDescriptionContent>
                        <div *ngIf="getItemName(item.item) !== nameHiddenText" class="popoverClass">
                          <span *ngIf="!itemIsResource(item.item) && !itemIsEquipment(item.item)" [innerHTML]="lookupService.getItemDescription(item.item)"></span>                          
                          <app-equipment-item-view *ngIf="itemIsEquipment(item.item)" [equipment]="lookupService.getEquipmentPieceByItemType(item.item)"></app-equipment-item-view>
                        </div>
                        <span *ngIf="getItemName(item.item) === nameHiddenText">{{nameHiddenText}}</span>
                      </ng-template>
                </div>
                <br/>
                <div *ngIf="availableTreasure.length > 0" class="smallCaps bold subheader">treasure</div>
                <div class="item" *ngFor="let item of availableTreasure; let i = index">
                    <span *ngIf="!itemIsResource(item.item)" [ngClass]="getItemClass(item.item)" customToolTip [tooltipDirection]="tooltipDirection"
                    [contentTemplate]="itemDescriptionContent" [innerHtml]="getItemName(item.item)"></span><span *ngIf="!itemIsResource(item.item)"> ({{getTreasureChestChance()}})</span>
                    <div *ngIf="itemIsResource(item.item)">
                    <app-resource-item-view [resource]="item.item" [canSetTrackingResource]="false"></app-resource-item-view> <span> ({{getTreasureChestChance()}})</span>
                </div>
                    <ng-template #itemDescriptionContent>
                        <div *ngIf="getItemName(item.item) !== nameHiddenText" class="popoverClass">
                          <span *ngIf="!itemIsResource(item.item) && !itemIsEquipment(item.item)" [innerHTML]="lookupService.getItemDescription(item.item)"></span>                          
                          <app-equipment-item-view *ngIf="itemIsEquipment(item.item)" [equipment]="lookupService.getEquipmentPieceByItemType(item.item)"></app-equipment-item-view>
                        </div>
                        <span *ngIf="getItemName(item.item) === nameHiddenText">{{nameHiddenText}}</span>
                      </ng-template>
                </div>
            </div>
        </div>
    </div>
  </div>